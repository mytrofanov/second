(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[6],{279:function(e,t,n){e.exports={UsersBlock:"users_UsersBlock__n57CH",usersPhoto:"users_usersPhoto__3NDxA",startAndEnd:"users_startAndEnd__1ttIE",userName:"users_userName__1cOMm",userBlock:"users_userBlock__K67G0",UserSearchBlock:"users_UserSearchBlock__9w3vM",SearchBlockWithButton:"users_SearchBlockWithButton__1Z2qv",Highlight:"users_Highlight__1bBZO",ContainerForSearchEngine:"users_ContainerForSearchEngine__2Lh8t"}},295:function(e,t,n){e.exports={paginator:"Paginator_paginator__1i1Wb",pageNumber:"Paginator_pageNumber__trql5",usersPhoto:"Paginator_usersPhoto__xeXVQ",selectedPage:"Paginator_selectedPage__3m2UJ",nonSelectedPage:"Paginator_nonSelectedPage__xaHAf",totalPages:"Paginator_totalPages__1Z_dr"}},326:function(e,t,n){"use strict";n.r(t);var r,s=n(29),a=n(30),o=n(48),c=n(47),i=n(0),l=n.n(i),u=n(33),j=n(63),h=n(118),d=n(295),g=n.n(d),b=n(296),p=n(324),f=n(2),O=function(e){for(var t=e.totalUsersCount,n=e.currentPage,r=e.pageSize,s=e.onPageChanged,a=(e.portionSize,Math.ceil(t/r)),o=[],c=1;c<=a;c++)o.push(c);return Object(f.jsx)("div",{className:g.a.paginator,children:Object(f.jsx)("div",{className:g.a.pageNumber,children:Object(f.jsx)(b.a,{spacing:2,children:Object(f.jsx)(p.a,{count:a,variant:"outlined",shape:"rounded",showFirstButton:!0,showLastButton:!0,defaultPage:n,onChange:function(e,t){s(t)}})})})})},x=n(100),m=n(27),v=n(265),w=n(328),_=n(332),P=n(331),C=n(330),S=n(263),k=n(271),y=n(266),U=function(e){var t=e.user,n=e.followingInProgress,r=e.unfollow,s=e.follow;return Object(f.jsx)("div",{children:Object(f.jsxs)(v.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[Object(f.jsxs)(w.a,{alignItems:"flex-start",children:[Object(f.jsx)(C.a,{children:Object(f.jsx)(m.b,{to:"/profile/"+t.id,children:Object(f.jsx)(S.a,{alt:t.name,src:null!=t.photos.small?t.photos.small:x.a})})}),Object(f.jsx)(P.a,{primary:t.name,secondary:Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)(k.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:t.status}),Object(f.jsx)("div",{children:t.followed?Object(f.jsx)(y.a,{variant:"outlined",color:"error",disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"unfollow"}):Object(f.jsx)(y.a,{variant:"outlined",color:"success",disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},children:"Follow"})})]})})]}),Object(f.jsx)(_.a,{variant:"inset",component:"li"})]})})},B=n(279),z=n.n(B),I=n(9),N=n.n(I),F=n(18),E=n(52),A=n(15),L=n(106),W=n.n(L),H=n(260),D=n(267),M=function(e){var t=e.name,n=e.searchText,r=t.split(new RegExp("(".concat(n,")"),"gi"));return Object(f.jsx)(f.Fragment,{children:r.map((function(e,t){return e.toLowerCase()===n.toLowerCase()?Object(f.jsx)("b",{className:z.a.Highlight,children:e},t):e}))})},T=n(59),J=n(17),Z=n(138),q=n.n(Z),K=n(325);function V(e){e.followingInProgress,e.follow,e.unfollow;var t=Object(i.useState)([]),n=Object(A.a)(t,2),s=n[0],a=n[1],o=Object(i.useState)([]),c=Object(A.a)(o,2),u=c[0],j=c[1],h=Object(i.useState)(0),d=Object(A.a)(h,2),g=d[0],b=d[1],p=Object(i.useState)(!1),O=Object(A.a)(p,2),U=O[0],B=O[1],I=Object(i.useState)(""),L=Object(A.a)(I,2),T=L[0],Z=L[1],V=Object(i.useState)(0),G=Object(A.a)(V,2),Q=G[0],R=G[1],X=Object(i.useState)(""),Y=Object(A.a)(X,2),$=Y[0],ee=Y[1],te=function(){B(!1)},ne=Object(J.css)(r||(r=Object(E.a)(["\n      display: block;\n      z-index: 1000;\n      position: fixed;\n      margin-top: 18px;\n      margin-left: 195px;\n      border-color: red;\n    "]))),re=Object(i.useCallback)((function(){var e=s.filter((function(e){return e.name.toLowerCase().includes(T.toLowerCase())}));j(e)}),[T,s]);function se(e){return B(!0),W.a.get(e,{headers:{"API-KEY":"7d870823-54dd-449f-8b28-49f59a10c313"}}).then((function(e){var t=e.data.items;return b(e.data.totalCount),a((function(e){return e.concat(t)}))})).then((function(e){setTimeout(te,1e3),re()})).catch((function(e){return ee(e.toString())}))}Object(i.useEffect)((function(){return re()}),[s,T,Q,re]);Object(i.useEffect)((function(){!function(){var e=Q+1;se("https://social-network.samuraijs.com/api/1.0/users?count=10&page=".concat(e)).catch((function(e){return console.log(e)})),R(e)}()}),[]);var ae=function(){var e=g/10;if(T.length>0&&u.length<1&&Q<e&&!1===U&&(oe(),Q>=e))return alert("\u0414\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442 \u043a\u043e\u043d\u0435\u0446 \u0441\u043f\u0438\u0441\u043a\u0430"),!1};function oe(){ee("");for(var e=[],t=Q,n=Q+10;t<n;)t++,e.push("https://social-network.samuraijs.com/api/1.0/users?count=10&page=".concat(t));R((function(e){return e+10}));var r=function(){var e=Object(F.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.map(se);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r(e).catch((function(e){return console.log(e)}))}Object(i.useEffect)((function(){!0===U&&setTimeout(ae(),1e3),!1===U&&ae()}),[T,u]);return Object(f.jsxs)("div",{className:z.a.ContainerForSearchEngine,children:[U&&Object(f.jsx)(q.a,{color:"#7D93C5",css:ne,size:15}),Object(f.jsxs)("div",{className:z.a.SearchBlockWithButton,children:[Object(f.jsx)("div",{className:"searchBlock",children:Object(f.jsx)("span",{children:Object(f.jsx)(D.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(f.jsx)(H.a,{id:"searchField",label:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",color:"primary",variant:"outlined",value:T,onChange:function(e){Z(e.target.value)}},"searchField")})})}),T.length>0&&Object(f.jsx)(y.a,{sx:{height:"40px",mt:"15px"},onClick:oe,variant:"contained",size:"small",children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 100 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 "})]}),Object(f.jsx)("div",{children:$&&Object(f.jsxs)(K.a,{sx:{width:"400px"},severity:"error",children:["\u0421\u0435\u0440\u0432\u0435\u0440 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0432\u044b\u0434\u0430\u0447\u0443 \u043f\u043e 10 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0437\u0430 \u0440\u0430\u0437. \u041d\u0435 \u0441\u0442\u0435\u0441\u043d\u044f\u0435\u043c\u0441\u044f, \u0436\u043c\u0435\u043c \u0434\u0430\u043b\u044c\u0448\u0435. \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430:",$]})}),T.length>0&&Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439 ",u.length," \u0438\u0437 ",g," "]}),Object(f.jsxs)("b",{children:[" \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u2116 ",Q," "]}),Object(f.jsx)("div",{children:u.map((function(e,t){return Object(f.jsxs)(v.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[Object(f.jsxs)(w.a,{alignItems:"flex-start",children:[Object(f.jsx)(C.a,{children:Object(f.jsx)(m.b,{to:"/profile/"+e.id,children:Object(f.jsx)(S.a,{alt:e.name,src:null!=e.photos.small?e.photos.small:x.a})})}),Object(f.jsx)(P.a,{primary:Object(f.jsx)(M,{name:e.name,searchText:T}),secondary:Object(f.jsx)(l.a.Fragment,{children:Object(f.jsx)(k.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:e.status})})})]}),Object(f.jsx)(_.a,{variant:"inset",component:"li"})]})}))})]})]})}var G=["currentPage","onPageChanged","pageSize","totalUsersCount"],Q=function(e){var t=e.currentPage,n=e.onPageChanged,r=e.pageSize,s=e.totalUsersCount,a=Object(h.a)(e,G);return Object(f.jsxs)("div",{className:z.a.UsersBlock,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{totalUsersCount:s,pageSize:r,onPageChanged:n,currentPage:t}),a.users.map((function(e){return Object(f.jsx)(U,{user:e,followingInProgress:a.followingInProgress,unfollow:a.unfollow,follow:a.follow},e.id)}))]}),Object(f.jsx)("div",{className:z.a.UserSearchBlock,children:Object(f.jsx)(V,{followingInProgress:a.followingInProgress,unfollow:a.unfollow,follow:a.follow})})]})},R=n(37),X=n(115),Y=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsers(t,n)},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"componentDidUpdate",value:function(e){if(this.props.followingInProgress!==e.followingInProgress){var t=this.props,n=t.currentPage,r=t.pageSize;this.props.getUsers(n,r)}}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[this.props.isFetching?Object(f.jsx)(T.a,{}):null,Object(f.jsx)(Q,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})]})}}]),n}(l.a.Component);t.default=Object(R.c)(Object(u.b)((function(e){return{users:Object(X.e)(e),pageSize:Object(X.d)(e),currentPage:Object(X.a)(e),totalUsersCount:Object(X.f)(e),isFetching:Object(X.c)(e),followingInProgress:Object(X.b)(e)}}),{follow:j.b,unfollow:j.e,getUsers:j.c}))(Y)}}]);
//# sourceMappingURL=6.7e26d33f.chunk.js.map